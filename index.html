<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>五号房语生成器Ⅴ</title>
    <style>
        .input {
    width: 200px;
    height: 100px;
}
    </style>

    <script>
        function textchange(){
    var str = $('#en').val()
    var rnf = document.getElementById("rnf")
    var s1 = /aar/g
    var s2 = /ear/g
    var s3 = /oar/g
    var s12 = /si/g
    var s13 = /ci/g
    var s4 = /ar/g
    var s5 = /or/g
    var s6 = /er/g
    var s7 = /ee/g
    var s8 = /ea/g
    var s9 = /aa/g
    var s10 = /e/g
    var s11 = /c/g
    str = str.replace(s1,'ä3');
    str = str.replace(s2,'ä3');
    str = str.replace(s3,'ä3');
    str = str.replace(s11,'ç');
    str = str.replace(s12,'ç');
    str = str.replace(s13,'ç');
    str = str.replace(s4,'3');
    str = str.replace(s5,'3');
    str = str.replace(s6,'3');
    str = str.replace(s7,'ä');
    str = str.replace(s8,'ä');
    str = str.replace(s9,'ä');
    str = str.replace(s10,'æ');
    str = str.replace(s11,'ä3');
    $('#rnf').attr('value',str)
}
        $("#copy").on("tap",function(){
  //获取input对象
  var obj = document.getElementById("rnf");
  //如果是ios端
  if(isiOSDevice){
    // 获取元素内容是否可编辑和是否只读
    var editable = obj.contentEditable;
    var readOnly = obj.readOnly;

    // 将对象变成可编辑的
    obj.contentEditable = true;
    obj.readOnly = false;

    // 创建一个Range对象，Range 对象表示文档的连续范围区域，如用户在浏览器窗口中用鼠标拖动选中的区域
    var range = document.createRange();
   //获取obj的内容作为选中的范围
    range.selectNodeContents(obj);
    
    var selection = window.getSelection();
    selection.removeAllRanges();
    selection.addRange(range);

    obj.setSelectionRange(0, 999999);  //选择范围，确保全选
    //恢复原来的状态
    obj.contentEditable = editable;
    obj.readOnly = readOnly;
    //如果是安卓端    
  }else{
    obj.select();
  }
  try{
    if(document.execCommand("Copy","false",null)){
      alert("复制成功！");  
    }else{
      alert("复制失败！请手动复制！");
    }
  }catch(err){
    alert("复制错误！请手动复制！")
  }
})

    </script>
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
</head>
<body>
    <div>
    <input type="text" placeholder="请输入英文...." id="en" class="input" oninput="textchange()">
    <input type="text" id="rnf" class="input" placeholder="请稍后.... " onfocus="this.blur()">
    <button id="copy">复制</button>
    </div>
</body>
</html>
